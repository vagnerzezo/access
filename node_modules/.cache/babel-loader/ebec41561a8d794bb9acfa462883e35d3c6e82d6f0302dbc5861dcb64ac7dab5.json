{"ast":null,"code":"import { login } from '@/services/authService';\nimport Logado from '@/components/logado.vue';\nexport default {\n  data() {\n    return {\n      username: '',\n      password: '',\n      error: null,\n      auth: false,\n      // Começa como não autenticado\n      userId: null\n    };\n  },\n  components: {\n    Logado\n  },\n  methods: {\n    async handleLogin() {\n      try {\n        const userData = await login(this.username, this.password);\n        console.log('ID do usuário:', userData.id); // Verificação do ID\n        localStorage.setItem('token', userData.accessToken); // Salva o token\n        this.userId = userData.id; // Salva o ID do usuário\n        this.auth = true; // Atualiza o estado de autenticação\n      } catch (err) {\n        this.error = err.message;\n      }\n    },\n    checkAuth() {\n      const token = localStorage.getItem('token');\n      if (token) {\n        this.auth = true; // Usuário autenticado\n      } else {\n        this.auth = false; // Usuário não autenticado\n      }\n    },\n    clearLocalStorage() {\n      localStorage.clear(); // Limpa todo o localStorage\n    }\n  },\n  created() {\n    this.checkAuth(); // Verifica autenticação ao montar o componente\n    // Adiciona o evento para limpar o localStorage antes de sair\n    window.addEventListener('beforeunload', this.clearLocalStorage);\n  },\n  beforeUnmount() {\n    // Remove o evento ao destruir o componente\n    window.removeEventListener('beforeunload', this.clearLocalStorage);\n  }\n};","map":{"version":3,"names":["login","Logado","data","username","password","error","auth","userId","components","methods","handleLogin","userData","console","log","id","localStorage","setItem","accessToken","err","message","checkAuth","token","getItem","clearLocalStorage","clear","created","window","addEventListener","beforeUnmount","removeEventListener"],"sources":["/Users/vagnerzezo/Documents/development/2025/access/src/components/login.vue"],"sourcesContent":["<template>\n     <div class=\"bg-white dark:bg-gray-900\">\n          <div class=\"flex justify-center h-screen\">\n               <div class=\"hidden bg-cover lg:block lg:w-2/3\"\n                    style=\"background-image: url(https://images.unsplash.com/photo-1616763355603-9755a640a287?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80)\">\n                    <div class=\"flex items-center h-full px-20 bg-gray-900 bg-opacity-40\">\n                         <div>\n                              <h2 class=\"text-4xl font-bold text-white\">zezo solutions</h2>\n\n                              <p class=\"max-w-xl mt-3 text-gray-300\">Lorem ipsum dolor sit, amet consectetur adipisicing\n                                   elit. In autem\n                                   ipsa, nulla laboriosam dolores, repellendus perferendis libero suscipit nam\n                                   temporibus molestiae</p>\n                         </div>\n                    </div>\n               </div>\n               <div v-if=\"!auth\" class=\"flex items-center w-full max-w-md px-6 mx-auto lg:w-2/6\">\n                    <div class=\"flex-1\">\n                         <div class=\"text-center\">\n                              <h2 class=\"text-4xl font-bold text-center text-gray-700 dark:text-white\">zezo solutions\n                              </h2>\n\n                              <p class=\"mt-3 text-gray-500 dark:text-gray-300\">Entre para acessar sua conta</p>\n                         </div>\n\n                         <div class=\"mt-8\">\n                              <form @submit.prevent=\"handleLogin\">\n                                   <div>\n                                        <label for=\"email\"\n                                             class=\"block mb-2 text-sm text-gray-600 dark:text-gray-200\">Username\n                                        </label>\n                                        <input type=\"username\" name=\"username\" id=\"username\" v-model=\"username\"\n                                             placeholder=\"vagnerzezo\" autocomplete=\"username\"\n                                             class=\"block w-full px-4 py-2 mt-2 text-gray-700 placeholder-gray-400 bg-white border border-gray-200 rounded-md dark:placeholder-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:border-gray-700 focus:border-blue-400 dark:focus:border-blue-400 focus:ring-blue-400 focus:outline-none focus:ring focus:ring-opacity-40\" />\n                                   </div>\n\n                                   <div class=\"mt-6\">\n                                        <div class=\"flex justify-between mb-2\">\n                                             <label for=\"password\"\n                                                  class=\"text-sm text-gray-600 dark:text-gray-200\">Senha</label>\n                                        </div>\n\n                                        <input type=\"password\" v-model=\"password\" name=\"password\" id=\"password\"\n                                             placeholder=\"Your Password\" autocomplete=\"current-password\"\n                                             class=\"block w-full px-4 py-2 mt-2 text-gray-700 placeholder-gray-400 bg-white border border-gray-200 rounded-md dark:placeholder-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:border-gray-700 focus:border-blue-400 dark:focus:border-blue-400 focus:ring-blue-400 focus:outline-none focus:ring focus:ring-opacity-40\" />\n                                   </div>\n\n                                   <div class=\"mt-6\">\n                                        <button type=\"submit\"\n                                             class=\"w-full px-4 py-2 tracking-wide text-white transition-colors duration-200 transform bg-blue-500 rounded-md hover:bg-blue-400 focus:outline-none focus:bg-blue-400 focus:ring focus:ring-blue-300 focus:ring-opacity-50\">\n                                             Entrar\n                                        </button>\n                                   </div>\n                              </form>\n                         </div>\n                    </div>\n               </div>\n               <div v-else class=\"flex items-center w-full max-w-md px-6 mx-auto lg:w-2/6\">\n                    <Logado :userId=\"userId\" />\n               </div>\n\n          </div>\n     </div>\n</template>\n\n<script>\nimport { login } from '@/services/authService';\nimport Logado from '@/components/logado.vue';\n\nexport default {\n     data() {\n          return {\n               username: '',\n               password: '',\n               error: null,\n               auth: false, // Começa como não autenticado\n               userId: null,\n          };\n     },\n     components: {\n          Logado,\n     },\n     methods: {\n          async handleLogin() {\n               try {\n                    const userData = await login(this.username, this.password);\n                    console.log('ID do usuário:', userData.id); // Verificação do ID\n                    localStorage.setItem('token', userData.accessToken); // Salva o token\n                    this.userId = userData.id; // Salva o ID do usuário\n                    this.auth = true; // Atualiza o estado de autenticação\n               } catch (err) {\n                    this.error = err.message;\n               }\n          },\n          checkAuth() {\n               const token = localStorage.getItem('token');\n               if (token) {\n                    this.auth = true; // Usuário autenticado\n               } else {\n                    this.auth = false; // Usuário não autenticado\n               }\n          },\n          clearLocalStorage() {\n               localStorage.clear(); // Limpa todo o localStorage\n          },\n     },\n     created() {\n          this.checkAuth(); // Verifica autenticação ao montar o componente\n          // Adiciona o evento para limpar o localStorage antes de sair\n          window.addEventListener('beforeunload', this.clearLocalStorage);\n     },\n     beforeUnmount() {\n          // Remove o evento ao destruir o componente\n          window.removeEventListener('beforeunload', this.clearLocalStorage);\n     },\n};\n</script>"],"mappings":"AAkEA,SAASA,KAAI,QAAS,wBAAwB;AAC9C,OAAOC,MAAK,MAAO,yBAAyB;AAE5C,eAAe;EACVC,IAAIA,CAAA,EAAG;IACF,OAAO;MACFC,QAAQ,EAAE,EAAE;MACZC,QAAQ,EAAE,EAAE;MACZC,KAAK,EAAE,IAAI;MACXC,IAAI,EAAE,KAAK;MAAE;MACbC,MAAM,EAAE;IACb,CAAC;EACN,CAAC;EACDC,UAAU,EAAE;IACPP;EACL,CAAC;EACDQ,OAAO,EAAE;IACJ,MAAMC,WAAWA,CAAA,EAAG;MACf,IAAI;QACC,MAAMC,QAAO,GAAI,MAAMX,KAAK,CAAC,IAAI,CAACG,QAAQ,EAAE,IAAI,CAACC,QAAQ,CAAC;QAC1DQ,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEF,QAAQ,CAACG,EAAE,CAAC,EAAE;QAC5CC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEL,QAAQ,CAACM,WAAW,CAAC,EAAE;QACrD,IAAI,CAACV,MAAK,GAAII,QAAQ,CAACG,EAAE,EAAE;QAC3B,IAAI,CAACR,IAAG,GAAI,IAAI,EAAE;MACvB,EAAE,OAAOY,GAAG,EAAE;QACT,IAAI,CAACb,KAAI,GAAIa,GAAG,CAACC,OAAO;MAC7B;IACL,CAAC;IACDC,SAASA,CAAA,EAAG;MACP,MAAMC,KAAI,GAAIN,YAAY,CAACO,OAAO,CAAC,OAAO,CAAC;MAC3C,IAAID,KAAK,EAAE;QACN,IAAI,CAACf,IAAG,GAAI,IAAI,EAAE;MACvB,OAAO;QACF,IAAI,CAACA,IAAG,GAAI,KAAK,EAAE;MACxB;IACL,CAAC;IACDiB,iBAAiBA,CAAA,EAAG;MACfR,YAAY,CAACS,KAAK,CAAC,CAAC,EAAE;IAC3B;EACL,CAAC;EACDC,OAAOA,CAAA,EAAG;IACL,IAAI,CAACL,SAAS,CAAC,CAAC,EAAE;IAClB;IACAM,MAAM,CAACC,gBAAgB,CAAC,cAAc,EAAE,IAAI,CAACJ,iBAAiB,CAAC;EACpE,CAAC;EACDK,aAAaA,CAAA,EAAG;IACX;IACAF,MAAM,CAACG,mBAAmB,CAAC,cAAc,EAAE,IAAI,CAACN,iBAAiB,CAAC;EACvE;AACL,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}